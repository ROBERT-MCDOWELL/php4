diff -burN php-4.3.11RC2.orig/TSRM/threads.m4 php-4.3.11RC2/TSRM/threads.m4
--- php-4.3.11RC2.orig/TSRM/threads.m4	2005-03-29 22:04:21.137384088 +0200
+++ php-4.3.11RC2/TSRM/threads.m4	2005-03-29 22:24:43.348579744 +0200
@@ -108,7 +108,6 @@
 else
   save_CFLAGS=$CFLAGS
   save_LIBS=$LIBS
-  PTHREADS_ASSIGN_VARS
   PTHREADS_CHECK_COMPILE
   LIBS=$save_LIBS
   CFLAGS=$save_CFLAGS
@@ -126,9 +125,10 @@
         break
       fi
     done
+    pthreads_working=
   fi
-fi
 ])
+fi
 
 AC_CACHE_CHECK(for pthreads_lib, ac_cv_pthreads_lib,[
 ac_cv_pthreads_lib=
@@ -155,6 +155,7 @@
 dnl
 dnl
 AC_DEFUN([PTHREADS_ASSIGN_VARS],[
+if test "$pthreads_assign_done" != "yes" ; then
 if test -n "$ac_cv_pthreads_lib"; then
   LIBS="$LIBS -l$ac_cv_pthreads_lib"
 fi
@@ -162,4 +163,6 @@
 if test -n "$ac_cv_pthreads_cflags"; then
   CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
 fi
+pthreads_assign_done="yes"
+fi
 ])dnl
diff -burN php-4.3.11RC2.orig/TSRM/tsrm.m4 php-4.3.11RC2/TSRM/tsrm.m4
--- php-4.3.11RC2.orig/TSRM/tsrm.m4	2005-03-29 22:04:21.122386368 +0200
+++ php-4.3.11RC2/TSRM/tsrm.m4	2005-03-29 22:28:56.311123592 +0200
@@ -68,7 +68,6 @@
 ])
 
 sinclude(threads.m4)
-sinclude(TSRM/threads.m4)
 
 AC_DEFUN([TSRM_CHECK_PTHREADS],[
 		
diff -burN php-4.3.11RC2.orig/configure.in php-4.3.11RC2/configure.in
--- php-4.3.11RC2.orig/configure.in	2005-03-29 22:04:21.306358400 +0200
+++ php-4.3.11RC2/configure.in	2005-03-29 22:29:17.675875656 +0200
@@ -226,6 +226,7 @@
 
 sinclude(Zend/acinclude.m4)
 sinclude(Zend/Zend.m4)
+sinclude(TSRM/threads.m4)
 sinclude(TSRM/tsrm.m4)
 
 
