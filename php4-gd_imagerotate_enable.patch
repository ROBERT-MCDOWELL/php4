diff -burN php-4.3.11RC2.orig/ext/gd/gd.c php-4.3.11RC2/ext/gd/gd.c
--- php-4.3.11RC2.orig/ext/gd/gd.c	2005-03-29 22:04:20.729446104 +0200
+++ php-4.3.11RC2/ext/gd/gd.c	2005-03-29 22:41:13.964983160 +0200
@@ -167,8 +167,8 @@
 	PHP_FE(imagecopyresampled,						NULL)
 #endif
 
-#ifdef HAVE_GD_BUNDLED
 	PHP_FE(imagerotate,     						NULL)
+#ifdef HAVE_GD_BUNDLED
 	PHP_FE(imageantialias,							NULL)
 #endif
 
@@ -381,11 +381,11 @@
 #ifdef GD2_FMT_COMPRESSED
 	REGISTER_LONG_CONSTANT("IMG_GD2_COMPRESSED", GD2_FMT_COMPRESSED, CONST_CS | CONST_PERSISTENT);
 #endif
-#if HAVE_GD_BUNDLED
 	REGISTER_LONG_CONSTANT("IMG_EFFECT_REPLACE", gdEffectReplace, CONST_CS | CONST_PERSISTENT);
 	REGISTER_LONG_CONSTANT("IMG_EFFECT_ALPHABLEND", gdEffectAlphaBlend, CONST_CS | CONST_PERSISTENT);
 	REGISTER_LONG_CONSTANT("IMG_EFFECT_NORMAL", gdEffectNormal, CONST_CS | CONST_PERSISTENT);
 	REGISTER_LONG_CONSTANT("IMG_EFFECT_OVERLAY", gdEffectOverlay, CONST_CS | CONST_PERSISTENT);
+#if HAVE_GD_BUNDLED
 	REGISTER_LONG_CONSTANT("GD_BUNDLED", 1, CONST_CS | CONST_PERSISTENT);
 #else
 	REGISTER_LONG_CONSTANT("GD_BUNDLED", 0, CONST_CS | CONST_PERSISTENT);
@@ -1121,7 +1121,6 @@
 /* }}} */
 #endif
 
-#ifdef HAVE_GD_BUNDLED
 /* {{{ proto resource imagerotate(resource src_im, float angle, int bgdcolor)
    Rotate an image using a custom angle */
 PHP_FUNCTION(imagerotate)
@@ -1151,7 +1150,6 @@
 	}
 }
 /* }}} */
-#endif
 
 #if HAVE_GD_IMAGESETTILE
 /* {{{ proto bool imagesettile(resource image, resource tile)
diff -burN php-4.3.11RC2.orig/ext/gd/php_gd.h php-4.3.11RC2/ext/gd/php_gd.h
--- php-4.3.11RC2.orig/ext/gd/php_gd.h	2005-03-29 22:04:20.745443672 +0200
+++ php-4.3.11RC2/ext/gd/php_gd.h	2005-03-29 22:41:28.018846648 +0200
@@ -103,8 +103,8 @@
 PHP_FUNCTION(imagecopyresampled);
 #endif
 
-#ifdef HAVE_GD_BUNDLED
 PHP_FUNCTION(imagerotate);
+#ifdef HAVE_GD_BUNDLED
 PHP_FUNCTION(imageantialias);
 #endif
 
